<html>
    <head>
      <label>&nbsp;</label>
      <center><h1 style="font-size:50px;">Applicant Portal<label>&nbsp;&nbsp;</label><i class="med user circle icon" ></i></h1></center> 
     
      <label>&nbsp;</label> 
      <label>&nbsp;</label> 
      <label>&nbsp;</label> <label>&nbsp;</label>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">
        <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>
    </head>

    <body>
        <div class="ui container">
            
            <label style="padding-right: 25cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
               
        <button id="homepage" class="ui button secondary" onclick="location.href='http://127.0.0.1:5000/';">Home Page</button>
          
    <!-- <button id="view_jobs_list" class="ui button secondary">View Jobs List</button> -->

    <table class="ui celled black table" id="Job Posting Table">
        <label>&nbsp;</label>
        <label>&nbsp;</label>
        <label>&nbsp;</label>
        <thead style="text-align:center;">
          <style>
            /* .row{
             background-color:aquamarine;
             -webkit-print-color-adjust: exact; 
             } */
           </style>
          <tr>
            <th class="headings">Job ID</th>
            <th><h5 class="ui header">Posted by</h5></th>
            <th><h5 class="ui header">Job Type</h5></th>
            <th><h5 class="ui header">Company</h5></th>
            <th><h5 class="ui header">Job Location</h5></th>
            <th><h5 class="ui header">Is Active ?</h5></th>
            <th><h5 class="ui header"></h5></th>
          </tr>
        </thead>
        <tbody>
            
          {% for entry in data %}
          
          <tr>
            <td style="text-align:center;" id="jobid">{{ entry.Job_ID }}</td>
            <td style="text-align:center;">{{ entry.Posted_by }}</td>
            <td style="text-align:center;">{{ entry.Job_Type }}</td>
            <td style="text-align:center;">{{ entry.Company }}</td>
            <td style="text-align:center;">{{ entry.Job_Location }}</td>
            <td style="text-align:center;">{{ entry.Is_Active }}</td>
            <td style="text-align:center;"> <button class="right ui primary button"; onclick="appfunc({{entry.Job_ID}})";>Apply</button></td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
       
      <div class="ui modal" id="applyjob">
        <i class="close icon"></i>
        <div class="header">
          Application
        </div>
        <div class="content">
          <div class="ui form">
            <div class="field">
            <label>Candidate ID</label>
            <textarea id="cand_id" rows=1 cols=1></textarea>
            </div>

            <div class="field">
            <label>First Name</label>
            <textarea id="fname" rows=1 cols=1></textarea>
            </div>

            <div class="field">
            <label>Last Name</label>
            <textarea id="lname" rows=1 cols=1></textarea>
            </div>

            <div class="field">
            <label>Ph No</label>
            <textarea id="phno" rows=1 cols=1></textarea>
            </div>

            <div class="field">
            <label>Experience</label>
            <textarea id="experience" rows=1 cols=1></textarea>
            </div>
            
            <label>&nbsp;</label>

            <div class="actions">
              <button class="ui blue button" id="apply">  
            
              Apply
              <label>&nbsp;</label>
           </button>

          </div>
        </div>
        </div>
        </div>
      
      <script>

            // $(document).ready(function() {
                // alert(document.getElementById ( "jobid" ).innerText)

               function appfunc(jid){
                    
                    $("#applyjob").modal('show');
                    $("#apply").click(function(){
                        // alert($("#entry.Job_ID").id)
                        
                        var ci = $("#cand_id").val();
                        var fn = $("#fname").val();
                        var ln = $("#lname").val();
                        var pn = $("#phno").val();
                        var ex = $("#experience").val();

          $.ajax({
              url: 'http://127.0.0.1:5000/candidate/job/' + jid + '/apply',
              type: 'post',
              contentType: 'application/json',
              data:JSON.stringify({"Job_ID":jid,"Cand_ID":ci,"First_Name":fn,"Last_Name":ln,"Ph_no":pn,"Experience":ex}) ,
              dataType: 'json',
              success: function(){alert('Your application has been posted sucessfully!');},
              error: function(xhr,textStatus,err) 
          {
          console.log("readyState: " + xhr.readyState);
          console.log("responseText: "+ xhr.responseText);
          console.log("status: " + xhr.status);
          console.log("text status: " + textStatus);
          console.log("error: " + err);
          }
            });

          $('#applyjob').modal('hide');
          location.reload();
          window.location.href='http://127.0.0.1:5000/candidate'
          });


        }      


                // });

                // window.location.href='http://127.0.0.1:8000/candidate'
           
            </script>


</html>
